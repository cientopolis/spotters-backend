# Spotters

Spotters is a Citizen Science Application Framework.
This repository holds the API/backend part of the framework, where all the data is stored.
The [spotters-frontend](https://github.com/cientopolis/spotters-frontend) repository holds the frontend of the framework.

## Running on a Virtual Machine

It is possible to run this project on a Virtual Machine. We provide Vagrant and Ansible configuration files to do so, generated by [railsbox](https://railsbox.io/) with some minor tweaks.

### Prerequisites

To run this application in a virtualized environment it is needed to have the following packages installed:
* [VirtualBox](https://www.virtualbox.org/)
* [Vagrant](https://www.vagrantup.com/)
* [Ansible](https://www.ansible.com/)

You will also need an [Auth0 Account](https://auth0.com/).

### Installation

```
cp config/secrets.sample.yml config/secrets.yml
nano config/secrets.yml
```

Configure that file with your own API keys and secrets and then in the terminal:

```
cd railsbox/development
vagrant up
```

This will download the base linux image, provision it and run the web server.

Then, from the host, you can go to http://localhost:3000 to access the API or to http://localhost:3000/admin to access the admin dashboard.

The app has a seeds file with example data. To load it, follow these steps:

```
cd railsbox/development
vagrant ssh
cd /spotters
rake db:seed
```

## Running Locally

You can also install this project locally on your own server or computer.

### Prerequisites

To run this project locally you need to install the following packages:
* [Ruby 2.3+](https://www.ruby-lang.org/)
* [Ruby on Rails 5+](http://rubyonrails.org/)
* [PostgreSQL](https://www.postgresql.org/)
* [PostGIS](http://postgis.net/)

You can follow the guide provided by [GoRails](https://gorails.com/setup/) to set up your environment.

You will also need an [Auth0 Account](https://auth0.com/).

### Installation

First, you need to clone or download this repository. Once you have it, navigate with the terminal to its directory.

Next, you need to configure the connection to the database.

```
nano config/database.yml
```

You may also need to create a PostgreSQL user with the proper permissions and a database owned by that user. We will use that database for this project.

Next, copy and edit the secrets.yml file with your own keys.

```
cp config/secrets.sample.yml config/secrets.yml
nano config/secrets.yml
```

Finally, run the following commands in the terminal to download the required dependencies, set up the database schema and start the web server.

```
bundle install
rake db:migrate
rails s
```

From your web browser, you can go to http://localhost:3000 to access the API or to http://localhost:3000/admin to access the admin dashboard.

If you want to load the example data, just execute the following command in the terminal:

```
rake db:seed
```
